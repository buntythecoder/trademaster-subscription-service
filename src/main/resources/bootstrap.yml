# Bootstrap Configuration for TradeMaster Subscription Service
# MANDATORY: Service Discovery and Configuration Server Integration
# Author: TradeMaster Development Team
# Version: 2.0.0

spring:
  application:
    name: subscription-service
  
  # Consul Integration
  cloud:
    consul:
      host: ${CONSUL_HOST:consul}
      port: ${CONSUL_PORT:8500}
      config:
        enabled: true
        format: YAML
        default-context: application
        profile-separator: ','
        data-key: data
        prefix: config
        watch:
          enabled: true
          delay: 1000
  
  # Security for Config Server (if enabled)
  security:
    user:
      name: ${CONFIG_SERVER_USERNAME:config-user}
      password: ${CONFIG_SERVER_PASSWORD:config-password}

# Consul Service Discovery Configuration - MANDATORY for TradeMaster Infrastructure
consul:
  enabled: ${CONSUL_ENABLED:true}
  host: ${CONSUL_HOST:consul}
  port: ${CONSUL_PORT:8500}
  datacenter: ${CONSUL_DATACENTER:trademaster-dc}

  discovery:
    enabled: true
    register: true
    deregister: true
    prefer-ip-address: true
    health-check-path: /actuator/health
    health-check-interval: 10s
    health-check-timeout: 5s
    health-check-critical-timeout: 30s
    fail-fast: false
    query-passing: true
    catalog-services-watch-delay: 1000
    catalog-services-watch-timeout: 2

  config:
    enabled: true
    format: YAML
    default-context: application
    profile-separator: ','
    data-key: data
    watch:
      enabled: true
      delay: 1000

# Logging Configuration for Bootstrap
logging:
  level:
    com.netflix.discovery: INFO
    org.springframework.cloud.config: INFO
    com.trademaster: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%logger{36}] - %msg%n"